{"ast":null,"code":"var _jsxFileName = \"/Users/aris/ABC/DU/code/integrasi/front-end/src/compnents/maps/MapModal.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useContext } from \"react\";\nimport { Modal, Col, Row, Button } from \"react-bootstrap\";\nimport { useHistory } from \"react-router-dom\"; // State Management\n\nimport { CartContext } from \"../../contexts/cartContext\";\nimport { UserContext } from \"../../contexts/userContext\"; // Components\n\nimport MapRender from \"../reusable/MapRender\"; // Assets\n\nimport iconMapPointer from \"./Pin\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MapModal({\n  show,\n  handleMapClose,\n  from,\n  data\n}) {\n  _s();\n\n  const history = useHistory();\n  const [isFinished, setIsFinished] = useState(false);\n  const [place, setPlace] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const {\n    state: cartState,\n    dispatch: cartDispatch\n  } = useContext(CartContext);\n  const {\n    state: userState,\n    dispatch: userDispatch\n  } = useContext(UserContext);\n\n  const fetchLocation = async () => {\n    const {\n      lng,\n      lat\n    } = userState.orderLocation;\n    const token = \"pk.eyJ1IjoiaWxoYW0yNSIsImEiOiJja20yczc0dm0zOWczMndwMzVmdmJ1bjI4In0.1l2Zgxjy5R0iW2SlySO_fQ\";\n    const apiUrl = `https://api.mapbox.com/geocoding/v5/mapbox.places/${lng},${lat}.json?limit=1&access_token=${token}`;\n    const api = await fetch(apiUrl);\n    const response = await api.json();\n    setPlace(response.features[0].text);\n    setAddress(response.features[0].place_name);\n  };\n\n  const renderDialog = () => {\n    switch (from) {\n      case \"delivery\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shadow p-3 overflow-auto\",\n          style: {\n            width: \"400px\",\n            height: \"200px\",\n            position: \"absolute\",\n            left: \"50%\",\n            bottom: \"0\",\n            backgroundColor: \"white\",\n            transform: \"translateX(-50%)\",\n            borderRadius: \"5px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            className: \"mb-2\",\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"font-weight-bold mb-0\",\n                children: \"Select delivery location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              lg: 2,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: iconMapPointer,\n                alt: \"map pointer\",\n                width: \"55\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              lg: 10,\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  lg: 12,\n                  children: /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"font-weight-bold\",\n                    children: place\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 70,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  lg: 12,\n                  style: {\n                    lineHeight: \"1\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-sm\",\n                    children: address\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 74,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 73,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: handleMapClose,\n                variant: \"brown\",\n                className: \"w-100\",\n                children: \"Confirm Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 6\n        }, this);\n        break;\n\n      case \"order\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shadow p-3 overflow-auto\",\n          style: {\n            width: \"500px\",\n            height: \"350px\",\n            position: \"absolute\",\n            right: \"30px\",\n            top: \"30px\",\n            backgroundColor: \"white\",\n            borderRadius: \"5px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            className: \"mb-4\",\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"font-weight-bold mb-0\",\n                children: \"Waiting for the transaction to be approved\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            className: \"mb-5\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              lg: 2,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: iconMapPointer,\n                alt: \"map pointer\",\n                width: \"55\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              lg: 10,\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  lg: 12,\n                  children: /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"font-weight-bold\",\n                    children: place\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  lg: 12,\n                  style: {\n                    lineHeight: \"1\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-sm\",\n                    children: address\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              lg: 12,\n              className: \"mb-4\",\n              children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"font-weight-bold mb-0\",\n                children: \"Delivery Time\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"10 - 15 minutes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 7\n          }, this), isFinished && /*#__PURE__*/_jsxDEV(Row, {\n            className: \"mt-4\",\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              lg: 12,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"brown\",\n                className: \"w-100\",\n                onClick: handleFinished,\n                children: \"Finished Order\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 6\n        }, this);\n        break;\n\n      case \"user\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shadow p-3 overflow-auto\",\n          style: {\n            width: \"400px\",\n            height: \"200px\",\n            position: \"absolute\",\n            left: \"50%\",\n            bottom: \"0\",\n            backgroundColor: \"white\",\n            transform: \"translateX(-50%)\",\n            borderRadius: \"5px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            className: \"mb-2\",\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"font-weight-bold mb-0\",\n                children: \"Select my location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              lg: 2,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: iconMapPointer,\n                alt: \"map pointer\",\n                width: \"55\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              lg: 10,\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  lg: 12,\n                  children: /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"font-weight-bold\",\n                    children: place\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  lg: 12,\n                  style: {\n                    lineHeight: \"1\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-sm\",\n                    children: address\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: handleMapClose,\n                variant: \"brown\",\n                className: \"w-100\",\n                children: \"Confirm Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 6\n        }, this);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  useEffect(() => {\n    // from === \"order\" &&\n    //   setTimeout(() => {\n    //     setIsFinished(true);\n    //   }, 5000);\n    fetchLocation();\n  }, [userState.orderLocation]);\n\n  const handleFinished = () => {\n    cartDispatch({\n      type: \"ADD_TRANSACTION\",\n      payload: data\n    });\n    cartDispatch({\n      type: \"EMPTY_CART\"\n    });\n    history.push(\"/profile\");\n    handleMapClose();\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: show,\n    dialogClassName: \"custom-modal\",\n    onHide: handleMapClose,\n    children: /*#__PURE__*/_jsxDEV(Modal.Body, {\n      style: {\n        position: \"relative\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(MapRender, {\n        isMarker: from === \"delivery\" || from === \"user\" && true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 5\n      }, this), renderDialog()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 231,\n    columnNumber: 3\n  }, this);\n}\n\n_s(MapModal, \"a2TlAPdefhBhDZKyCzHXyZ5v//k=\", false, function () {\n  return [useHistory];\n});\n\n_c = MapModal;\nexport default MapModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"MapModal\");","map":{"version":3,"sources":["/Users/aris/ABC/DU/code/integrasi/front-end/src/compnents/maps/MapModal.js"],"names":["useState","useEffect","useContext","Modal","Col","Row","Button","useHistory","CartContext","UserContext","MapRender","iconMapPointer","MapModal","show","handleMapClose","from","data","history","isFinished","setIsFinished","place","setPlace","address","setAddress","state","cartState","dispatch","cartDispatch","userState","userDispatch","fetchLocation","lng","lat","orderLocation","token","apiUrl","api","fetch","response","json","features","text","place_name","renderDialog","width","height","position","left","bottom","backgroundColor","transform","borderRadius","lineHeight","right","top","handleFinished","type","payload","push"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext } from \"react\";\n\nimport { Modal, Col, Row, Button } from \"react-bootstrap\";\nimport { useHistory } from \"react-router-dom\";\n\n// State Management\nimport { CartContext } from \"../../contexts/cartContext\";\nimport { UserContext } from \"../../contexts/userContext\";\n\n// Components\nimport MapRender from \"../reusable/MapRender\";\n\n// Assets\nimport iconMapPointer from \"./Pin\";\n\nfunction MapModal({ show, handleMapClose, from, data }) {\n\tconst history = useHistory();\n\tconst [isFinished, setIsFinished] = useState(false);\n\n\tconst [place, setPlace] = useState(\"\");\n\tconst [address, setAddress] = useState(\"\");\n\n\tconst { state: cartState, dispatch: cartDispatch } = useContext(CartContext);\n\tconst { state: userState, dispatch: userDispatch } = useContext(UserContext);\n\n\tconst fetchLocation = async () => {\n\t\tconst { lng, lat } = userState.orderLocation;\n\t\tconst token =\n\t\t\t\"pk.eyJ1IjoiaWxoYW0yNSIsImEiOiJja20yczc0dm0zOWczMndwMzVmdmJ1bjI4In0.1l2Zgxjy5R0iW2SlySO_fQ\";\n\t\tconst apiUrl = `https://api.mapbox.com/geocoding/v5/mapbox.places/${lng},${lat}.json?limit=1&access_token=${token}`;\n\n\t\tconst api = await fetch(apiUrl);\n\t\tconst response = await api.json();\n\n\t\tsetPlace(response.features[0].text);\n\t\tsetAddress(response.features[0].place_name);\n\t};\n\n\tconst renderDialog = () => {\n\t\tswitch (from) {\n\t\t\tcase \"delivery\":\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"shadow p-3 overflow-auto\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: \"400px\",\n\t\t\t\t\t\t\theight: \"200px\",\n\t\t\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t\t\tleft: \"50%\",\n\t\t\t\t\t\t\tbottom: \"0\",\n\t\t\t\t\t\t\tbackgroundColor: \"white\",\n\t\t\t\t\t\t\ttransform: \"translateX(-50%)\",\n\t\t\t\t\t\t\tborderRadius: \"5px\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Row className=\"mb-2\">\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<h5 className=\"font-weight-bold mb-0\">\n\t\t\t\t\t\t\t\t\tSelect delivery location\n\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row className=\"mb-3\">\n\t\t\t\t\t\t\t<Col lg={2}>\n\t\t\t\t\t\t\t\t<img src={iconMapPointer} alt=\"map pointer\" width=\"55\" />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col lg={10}>\n\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t\t\t\t\t<small className=\"font-weight-bold\">{place}</small>\n\t\t\t\t\t\t\t\t\t</Col>\n\n\t\t\t\t\t\t\t\t\t<Col lg={12} style={{ lineHeight: \"1\" }}>\n\t\t\t\t\t\t\t\t\t\t<small className=\"text-sm\">{address}</small>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleMapClose}\n\t\t\t\t\t\t\t\t\tvariant=\"brown\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-100\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tConfirm Location\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"order\":\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"shadow p-3 overflow-auto\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: \"500px\",\n\t\t\t\t\t\t\theight: \"350px\",\n\t\t\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t\t\tright: \"30px\",\n\t\t\t\t\t\t\ttop: \"30px\",\n\t\t\t\t\t\t\tbackgroundColor: \"white\",\n\t\t\t\t\t\t\tborderRadius: \"5px\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Row className=\"mb-4\">\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<h5 className=\"font-weight-bold mb-0\">\n\t\t\t\t\t\t\t\t\tWaiting for the transaction to be approved\n\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row className=\"mb-5\">\n\t\t\t\t\t\t\t<Col lg={2}>\n\t\t\t\t\t\t\t\t<img src={iconMapPointer} alt=\"map pointer\" width=\"55\" />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col lg={10}>\n\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t\t\t\t\t<small className=\"font-weight-bold\">{place}</small>\n\t\t\t\t\t\t\t\t\t</Col>\n\n\t\t\t\t\t\t\t\t\t<Col lg={12} style={{ lineHeight: \"1\" }}>\n\t\t\t\t\t\t\t\t\t\t<small className=\"text-sm\">{address}</small>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col lg={12} className=\"mb-4\">\n\t\t\t\t\t\t\t\t<h5 className=\"font-weight-bold mb-0\">Delivery Time</h5>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<p>10 - 15 minutes</p>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t{isFinished && (\n\t\t\t\t\t\t\t<Row className=\"mt-4\">\n\t\t\t\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"brown\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-100\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleFinished}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tFinished Order\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"user\":\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"shadow p-3 overflow-auto\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: \"400px\",\n\t\t\t\t\t\t\theight: \"200px\",\n\t\t\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t\t\tleft: \"50%\",\n\t\t\t\t\t\t\tbottom: \"0\",\n\t\t\t\t\t\t\tbackgroundColor: \"white\",\n\t\t\t\t\t\t\ttransform: \"translateX(-50%)\",\n\t\t\t\t\t\t\tborderRadius: \"5px\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Row className=\"mb-2\">\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<h5 className=\"font-weight-bold mb-0\">Select my location</h5>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row className=\"mb-3\">\n\t\t\t\t\t\t\t<Col lg={2}>\n\t\t\t\t\t\t\t\t<img src={iconMapPointer} alt=\"map pointer\" width=\"55\" />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col lg={10}>\n\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t\t\t\t\t<small className=\"font-weight-bold\">{place}</small>\n\t\t\t\t\t\t\t\t\t</Col>\n\n\t\t\t\t\t\t\t\t\t<Col lg={12} style={{ lineHeight: \"1\" }}>\n\t\t\t\t\t\t\t\t\t\t<small className=\"text-sm\">{address}</small>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleMapClose}\n\t\t\t\t\t\t\t\t\tvariant=\"brown\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-100\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tConfirm Location\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\t// from === \"order\" &&\n\t\t//   setTimeout(() => {\n\t\t//     setIsFinished(true);\n\t\t//   }, 5000);\n\n\t\tfetchLocation();\n\t}, [userState.orderLocation]);\n\n\tconst handleFinished = () => {\n\t\tcartDispatch({\n\t\t\ttype: \"ADD_TRANSACTION\",\n\t\t\tpayload: data,\n\t\t});\n\t\tcartDispatch({\n\t\t\ttype: \"EMPTY_CART\",\n\t\t});\n\t\thistory.push(\"/profile\");\n\t\thandleMapClose();\n\t};\n\treturn (\n\t\t<Modal show={show} dialogClassName=\"custom-modal\" onHide={handleMapClose}>\n\t\t\t<Modal.Body style={{ position: \"relative\" }}>\n\t\t\t\t<MapRender\n\t\t\t\t\tisMarker={from === \"delivery\" || (from === \"user\" && true)}\n\t\t\t\t/>\n\t\t\t\t{renderDialog()}\n\t\t\t</Modal.Body>\n\t\t</Modal>\n\t);\n}\n\nexport default MapModal;\n"]},"metadata":{},"sourceType":"module"}