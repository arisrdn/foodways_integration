{"ast":null,"code":"var _jsxFileName = \"/Users/aris/ABC/DU/code/integrasi/front-end/src/pages/Profile/index.js\",\n    _s = $RefreshSig$();\n\nimport { Link } from \"react-router-dom\";\nimport { useContext } from \"react\";\nimport { useQuery, useMutation } from \"react-query\";\nimport { API } from \"../../config/api\";\nimport logo from \"../../compnents/assets/img/logo.svg\";\nimport Moment from \"react-moment\";\nimport convertToRupiah from \"../../compnents/utils/ToRupiah\";\nimport { AuthContext } from \"../../contexts/authContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  var _userData$data, _userData$data$data, _userData$data$data$u, _userData$data2, _userData$data2$data, _userData$data2$data$, _userData$data3, _userData$data3$data, _userData$data3$data$, _userData$data4, _userData$data4$data, _userData$data4$data$, _userData$data5, _userData$data5$data, _userData$data5$data$, _transData$data, _transData$data$data, _transData$data$data$;\n\n  const [state, dispatch] = useContext(AuthContext);\n  const {\n    data: userData,\n    error: userError,\n    loading: userLoading,\n    refetch\n  } = useQuery(\"userCache\", async () => {\n    return API.get(\"/user\");\n  });\n  const {\n    data: transData,\n    error: transError,\n    loading: transLoading\n  } = useQuery(\"transCache\", async () => {\n    return API.get(\"/transactions/user\");\n  });\n  const finishTransaction = useMutation(async id => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const body = JSON.stringify({\n      status: \"SUCCESS\"\n    });\n    await API.put(`/transaction/${id}`, body, config);\n    refetch();\n  });\n\n  const handleFinish = async id => {\n    finishTransaction.mutate(id);\n  };\n\n  const handleStatus = (status, id) => {\n    switch (status) {\n      case \"Waiting Approve\":\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-block btn-outline-warning btn-sm mt-4\",\n          disabled: true,\n          children: \"Waiting Approve\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 6\n        }, this);\n\n      case \"On The Way\":\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleFinish(id),\n          className: \"btn btn-block btn-info btn-sm mt-4\",\n          children: \"Click To Complete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 6\n        }, this);\n\n      case \"Cancel\":\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-block btn-outline-danger btn-sm mt-4\",\n          disabled: true,\n          children: \"Canceled Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 6\n        }, this);\n\n      case \"Success\":\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-block btn-outline-success btn-sm mt-4\",\n          disabled: true,\n          children: \"Success\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 6\n        }, this);\n\n      default:\n        return; // <td></td><td></td>\n\n        break;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container pt-3\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row py-3 mt-3 mt-custom\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"my-2 col-lg-7 col-md-12 \",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-lg-5 col-md-12\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"img-fluid\",\n                src: (userData === null || userData === void 0 ? void 0 : (_userData$data = userData.data) === null || _userData$data === void 0 ? void 0 : (_userData$data$data = _userData$data.data) === null || _userData$data$data === void 0 ? void 0 : (_userData$data$data$u = _userData$data$data.user) === null || _userData$data$data$u === void 0 ? void 0 : _userData$data$data$u.image) ? userData.data.data.url + userData.data.data.user.image : \"https://ui-avatars.com/api/?background=433434&color=f4ad42&name=\" + (userData === null || userData === void 0 ? void 0 : (_userData$data2 = userData.data) === null || _userData$data2 === void 0 ? void 0 : (_userData$data2$data = _userData$data2.data) === null || _userData$data2$data === void 0 ? void 0 : (_userData$data2$data$ = _userData$data2$data.user) === null || _userData$data2$data$ === void 0 ? void 0 : _userData$data2$data$.fullName),\n                alt: \"profile\",\n                style: {\n                  objectFit: \"cover\",\n                  width: \"100%\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/profile/edit\",\n                className: \"btn btn-block btn-brown  btn-sm mt-4\",\n                children: \"Edit Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-lg-7 col-md-12 profile-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Full Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: userData === null || userData === void 0 ? void 0 : (_userData$data3 = userData.data) === null || _userData$data3 === void 0 ? void 0 : (_userData$data3$data = _userData$data3.data) === null || _userData$data3$data === void 0 ? void 0 : (_userData$data3$data$ = _userData$data3$data.user) === null || _userData$data3$data$ === void 0 ? void 0 : _userData$data3$data$.fullName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: userData === null || userData === void 0 ? void 0 : (_userData$data4 = userData.data) === null || _userData$data4 === void 0 ? void 0 : (_userData$data4$data = _userData$data4.data) === null || _userData$data4$data === void 0 ? void 0 : (_userData$data4$data$ = _userData$data4$data.user) === null || _userData$data4$data$ === void 0 ? void 0 : _userData$data4$data$.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Phone\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: userData === null || userData === void 0 ? void 0 : (_userData$data5 = userData.data) === null || _userData$data5 === void 0 ? void 0 : (_userData$data5$data = _userData$data5.data) === null || _userData$data5$data === void 0 ? void 0 : (_userData$data5$data$ = _userData$data5$data.user) === null || _userData$data5$data$ === void 0 ? void 0 : _userData$data5$data$.phone\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"my-2 col-lg-5 col-md-12 \",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: state.user.type == 1 ? \"History Transaction\" : \"History Order\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 7\n          }, this), transData === null || transData === void 0 ? void 0 : (_transData$data = transData.data) === null || _transData$data === void 0 ? void 0 : (_transData$data$data = _transData$data.data) === null || _transData$data$data === void 0 ? void 0 : (_transData$data$data$ = _transData$data$data.ransactions) === null || _transData$data$data$ === void 0 ? void 0 : _transData$data$data$.map(trans => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card text-left\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body row mx-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col px-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: [\" \", trans.restaurant.name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: /*#__PURE__*/_jsxDEV(Moment, {\n                      format: \"dddd DD MMM YYYY\",\n                      children: trans.updatedAt\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 13\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mb-0 mt-3\",\n                  style: {\n                    color: \"#974A4A\"\n                  },\n                  children: convertToRupiah(getSubTotal(trans.orders) + trans.shippingFee)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-5 px-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-12 row px-0\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    children: \"WaysFood\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 12\n                  }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: logo,\n                    alt: \"WF\",\n                    className: \"ml-2\",\n                    style: {\n                      objectFit: \"cover\",\n                      width: \"25px\",\n                      height: \"25px\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 12\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-12 row px-0\",\n                  children: handleStatus(trans.status, trans.id)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 8\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\n\n_s(Profile, \"uO9dQzPPL+dRU4kC9RUsxd3ntJ0=\", false, function () {\n  return [useQuery, useQuery, useMutation];\n});\n\n_c = Profile;\nexport default Profile;\n\nfunction getSubTotal(data) {\n  console.log(data);\n  var subtotal = 0;\n  data.forEach(function (obj) {\n    subtotal += obj.qty * obj.pricePurchased;\n  });\n  return subtotal;\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/Users/aris/ABC/DU/code/integrasi/front-end/src/pages/Profile/index.js"],"names":["Link","useContext","useQuery","useMutation","API","Moment","convertToRupiah","AuthContext","Profile","state","dispatch","data","userData","error","userError","loading","userLoading","refetch","get","transData","transError","transLoading","finishTransaction","id","config","headers","body","JSON","stringify","status","put","handleFinish","mutate","handleStatus","user","image","url","fullName","objectFit","width","email","phone","type","ransactions","map","trans","restaurant","name","updatedAt","color","getSubTotal","orders","shippingFee","logo","height","console","log","subtotal","forEach","obj","qty","pricePurchased"],"mappings":"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","sourcesContent":["import { Link } from \"react-router-dom\";\nimport { useContext } from \"react\";\nimport { useQuery, useMutation } from \"react-query\";\nimport { API } from \"../../config/api\";\nimport logo from \"../../compnents/assets/img/logo.svg\";\nimport Moment from \"react-moment\";\nimport convertToRupiah from \"../../compnents/utils/ToRupiah\";\n\nimport { AuthContext } from \"../../contexts/authContext\";\n\nconst Profile = () => {\n\tconst [state, dispatch] = useContext(AuthContext);\n\n\tconst {\n\t\tdata: userData,\n\t\terror: userError,\n\t\tloading: userLoading,\n\t\trefetch,\n\t} = useQuery(\"userCache\", async () => {\n\t\treturn API.get(\"/user\");\n\t});\n\tconst {\n\t\tdata: transData,\n\t\terror: transError,\n\t\tloading: transLoading,\n\t} = useQuery(\"transCache\", async () => {\n\t\treturn API.get(\"/transactions/user\");\n\t});\n\tconst finishTransaction = useMutation(async (id) => {\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t},\n\t\t};\n\n\t\tconst body = JSON.stringify({\n\t\t\tstatus: \"SUCCESS\",\n\t\t});\n\t\tawait API.put(`/transaction/${id}`, body, config);\n\t\trefetch();\n\t});\n\tconst handleFinish = async (id) => {\n\t\tfinishTransaction.mutate(id);\n\t};\n\tconst handleStatus = (status, id) => {\n\t\tswitch (status) {\n\t\t\tcase \"Waiting Approve\":\n\t\t\t\treturn (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn btn-block btn-outline-warning btn-sm mt-4\"\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t>\n\t\t\t\t\t\tWaiting Approve\n\t\t\t\t\t</button>\n\t\t\t\t);\n\n\t\t\tcase \"On The Way\":\n\t\t\t\treturn (\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() => handleFinish(id)}\n\t\t\t\t\t\tclassName=\"btn btn-block btn-info btn-sm mt-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\tClick To Complete\n\t\t\t\t\t</button>\n\t\t\t\t);\n\n\t\t\tcase \"Cancel\":\n\t\t\t\treturn (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn btn-block btn-outline-danger btn-sm mt-4\"\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t>\n\t\t\t\t\t\tCanceled Order\n\t\t\t\t\t</button>\n\t\t\t\t);\n\n\t\t\tcase \"Success\":\n\t\t\t\treturn (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn btn-block btn-outline-success btn-sm mt-4\"\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t>\n\t\t\t\t\t\tSuccess\n\t\t\t\t\t</button>\n\t\t\t\t);\n\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t\t\t// <td></td><td></td>\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"container pt-3\">\n\t\t\t\t<div className=\"row py-3 mt-3 mt-custom\">\n\t\t\t\t\t<div className=\"my-2 col-lg-7 col-md-12 \">\n\t\t\t\t\t\t<h2>Profile</h2>\n\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t<div className=\"col-lg-5 col-md-12\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tclassName=\"img-fluid\"\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tuserData?.data?.data?.user?.image\n\t\t\t\t\t\t\t\t\t\t\t? userData.data.data.url + userData.data.data.user.image\n\t\t\t\t\t\t\t\t\t\t\t: \"https://ui-avatars.com/api/?background=433434&color=f4ad42&name=\" +\n\t\t\t\t\t\t\t\t\t\t\t  userData?.data?.data?.user?.fullName\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt=\"profile\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tobjectFit: \"cover\",\n\t\t\t\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tto=\"/profile/edit\"\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-block btn-brown  btn-sm mt-4\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tEdit Profile\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"col-lg-7 col-md-12 profile-text\">\n\t\t\t\t\t\t\t\t<h5>Full Name</h5>\n\t\t\t\t\t\t\t\t<p>{userData?.data?.data?.user?.fullName}</p>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<h5>Email</h5>\n\t\t\t\t\t\t\t\t<p>{userData?.data?.data?.user?.email}</p>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<h5>Phone</h5>\n\t\t\t\t\t\t\t\t<p>{userData?.data?.data?.user?.phone}</p>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"my-2 col-lg-5 col-md-12 \">\n\t\t\t\t\t\t<h2>\n\t\t\t\t\t\t\t{state.user.type == 1 ? \"History Transaction\" : \"History Order\"}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t{transData?.data?.data?.ransactions?.map((trans) => (\n\t\t\t\t\t\t\t<div className=\"card text-left\">\n\t\t\t\t\t\t\t\t<div className=\"card-body row mx-0\">\n\t\t\t\t\t\t\t\t\t<div className=\"col px-1\">\n\t\t\t\t\t\t\t\t\t\t<h5> {trans.restaurant.name}</h5>\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t\t\t\t<Moment format=\"dddd DD MMM YYYY\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{trans.updatedAt}\n\t\t\t\t\t\t\t\t\t\t\t\t</Moment>\n\t\t\t\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"mb-0 mt-3\" style={{ color: \"#974A4A\" }}>\n\t\t\t\t\t\t\t\t\t\t\t{/* Total : RP 45.000 */}\n\t\t\t\t\t\t\t\t\t\t\t{convertToRupiah(\n\t\t\t\t\t\t\t\t\t\t\t\tgetSubTotal(trans.orders) + trans.shippingFee\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"col-5 px-1\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-12 row px-0\">\n\t\t\t\t\t\t\t\t\t\t\t<h5>WaysFood</h5>\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={logo}\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"WF\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-2\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tobjectFit: \"cover\",\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"25px\",\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: \"25px\",\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-12 row px-0\">\n\t\t\t\t\t\t\t\t\t\t\t{/* <Link\n\t\t\t\t\t\t\t\t\t\t\t\tto=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-block btn-outline-success btn-sm mt-4\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tSucces\n\t\t\t\t\t\t\t\t\t\t\t</Link> */}\n\n\t\t\t\t\t\t\t\t\t\t\t{handleStatus(trans.status, trans.id)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default Profile;\n\nfunction getSubTotal(data) {\n\tconsole.log(data);\n\tvar subtotal = 0;\n\tdata.forEach(function (obj) {\n\t\tsubtotal += obj.qty * obj.pricePurchased;\n\t});\n\treturn subtotal;\n}\n"]},"metadata":{},"sourceType":"module"}