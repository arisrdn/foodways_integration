{"ast":null,"code":"var _jsxFileName = \"/Users/aris/ABC/DU/code/integrasi/front-end/src/pages/Login.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { API, setAuthToken } from \"../config/api\";\nimport { AuthContext } from \"../contexts/authContext\";\nimport { Button, Form, Modal } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login(props) {\n  _s();\n\n  console.log(props);\n  const [state, dispatch] = useContext(AuthContext);\n  const router = useHistory();\n  const [form, setForm] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const {\n    email,\n    password\n  } = form; // const LoginUser = () => {\n  // \tdispatch({\n  // \t\ttype: \"LOGIN\",\n  // \t\tpayload: { email: form.email },\n  // \t});\n  // \tif (state.user.type) {\n  // \t\t// console.log(\"masuk\", state);\n  // \t\tif (state.user.type === 1) {\n  // \t\t\trouter.push(\"/\");\n  // \t\t\thandleClose();\n  // \t\t\tsetForm({\n  // \t\t\t\temail: \"\",\n  // \t\t\t\tpassword: \"\",\n  // \t\t\t});\n  // \t\t} else {\n  // \t\t\thandleClose();\n  // \t\t\trouter.push(\"/transaction\");\n  // \t\t\tsetForm({\n  // \t\t\t\temail: \"\",\n  // \t\t\t\tpassword: \"\",\n  // \t\t\t});\n  // \t\t}\n  // \t}\n  // };\n\n  const handleClose = () => {\n    dispatch({\n      type: \"MODAL_LOGIN_CLOSE\"\n    });\n  };\n\n  const handleOpenRegister = () => {\n    handleClose();\n    dispatch({\n      type: \"MODAL_REGISTER_OPEN\"\n    });\n  };\n\n  const onChange = e => {\n    const updateForm = { ...form\n    };\n    updateForm[e.target.name] = e.target.value;\n    setForm(updateForm);\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault(); // LoginUser();\n\n    try {\n      const body = JSON.stringify({\n        email,\n        password\n      });\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      };\n      const user = await API.post(\"/login\", body, config);\n      dispatch({\n        type: \"LOGIN_SUCCESS\",\n        payload: user.data.data.user\n      });\n      setAuthToken(user.data.data.user.token);\n      history.push(\"/home\");\n    } catch (error) {\n      console.log(error);\n    }\n  }; // console.log(\"login\", state);\n\n\n  return /*#__PURE__*/_jsxDEV(Modal // show={state.modalLogin}{modalshow}\n  , {\n    show: props.show ? props.show : state.modalLogin // onHide={handleClose}\n    ,\n    onHide: props.onHide ? props.onHide : handleClose,\n    size: \"sm\",\n    centered: true,\n    className: state.error ? \"error \" : \"\",\n    children: /*#__PURE__*/_jsxDEV(Modal.Body, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-title mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-yellow\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column\",\n        children: [/*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: e => handleSubmit(e),\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"formBasicEmail\",\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              value: form.email,\n              onChange: e => onChange(e),\n              type: \"email\",\n              name: \"email\",\n              className: \"form-control input-bg\",\n              placeholder: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"formBasicPassword\",\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              value: form.password,\n              onChange: e => onChange(e),\n              type: \"password\",\n              name: \"password\",\n              className: \"form-control input-bg\",\n              placeholder: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"brown\",\n            className: \"btn btn-block btn-round\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-danger\",\n          children: state.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center text-muted delimiter mt-2\",\n          children: [\"Don't have an account ? klick\", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"#\",\n            onClick: handleOpenRegister,\n            className: \"font-weight-bold text-muted\",\n            children: \"here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 7\n          }, this), \".\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Login, \"hIvKa4Io3E4NED266ZQG33mxR0c=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/aris/ABC/DU/code/integrasi/front-end/src/pages/Login.js"],"names":["useContext","useState","Link","useHistory","API","setAuthToken","AuthContext","Button","Form","Modal","Login","props","console","log","state","dispatch","router","form","setForm","email","password","handleClose","type","handleOpenRegister","onChange","e","updateForm","target","name","value","handleSubmit","preventDefault","body","JSON","stringify","config","headers","user","post","payload","data","token","history","push","error","show","modalLogin","onHide"],"mappings":"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","sourcesContent":["import { useContext, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { API, setAuthToken } from \"../config/api\";\n\nimport { AuthContext } from \"../contexts/authContext\";\n\nimport { Button, Form, Modal } from \"react-bootstrap\";\n\nfunction Login(props) {\n\tconsole.log(props);\n\tconst [state, dispatch] = useContext(AuthContext);\n\tconst router = useHistory();\n\tconst [form, setForm] = useState({\n\t\temail: \"\",\n\t\tpassword: \"\",\n\t});\n\tconst { email, password } = form;\n\n\t// const LoginUser = () => {\n\t// \tdispatch({\n\t// \t\ttype: \"LOGIN\",\n\t// \t\tpayload: { email: form.email },\n\t// \t});\n\n\t// \tif (state.user.type) {\n\t// \t\t// console.log(\"masuk\", state);\n\t// \t\tif (state.user.type === 1) {\n\t// \t\t\trouter.push(\"/\");\n\t// \t\t\thandleClose();\n\t// \t\t\tsetForm({\n\t// \t\t\t\temail: \"\",\n\t// \t\t\t\tpassword: \"\",\n\t// \t\t\t});\n\t// \t\t} else {\n\t// \t\t\thandleClose();\n\t// \t\t\trouter.push(\"/transaction\");\n\t// \t\t\tsetForm({\n\t// \t\t\t\temail: \"\",\n\t// \t\t\t\tpassword: \"\",\n\t// \t\t\t});\n\t// \t\t}\n\t// \t}\n\t// };\n\n\tconst handleClose = () => {\n\t\tdispatch({\n\t\t\ttype: \"MODAL_LOGIN_CLOSE\",\n\t\t});\n\t};\n\tconst handleOpenRegister = () => {\n\t\thandleClose();\n\t\tdispatch({\n\t\t\ttype: \"MODAL_REGISTER_OPEN\",\n\t\t});\n\t};\n\n\tconst onChange = (e) => {\n\t\tconst updateForm = { ...form };\n\t\tupdateForm[e.target.name] = e.target.value;\n\t\tsetForm(updateForm);\n\t};\n\tconst handleSubmit = async (e) => {\n\t\te.preventDefault();\n\t\t// LoginUser();\n\t\ttry {\n\t\t\tconst body = JSON.stringify({\n\t\t\t\temail,\n\t\t\t\tpassword,\n\t\t\t});\n\n\t\t\tconst config = {\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tconst user = await API.post(\"/login\", body, config);\n\n\t\t\tdispatch({\n\t\t\t\ttype: \"LOGIN_SUCCESS\",\n\t\t\t\tpayload: user.data.data.user,\n\t\t\t});\n\n\t\t\tsetAuthToken(user.data.data.user.token);\n\n\t\t\thistory.push(\"/home\");\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\t// console.log(\"login\", state);\n\treturn (\n\t\t<Modal\n\t\t\t// show={state.modalLogin}{modalshow}\n\t\t\tshow={props.show ? props.show : state.modalLogin}\n\t\t\t// onHide={handleClose}\n\t\t\tonHide={props.onHide ? props.onHide : handleClose}\n\t\t\tsize=\"sm\"\n\t\t\tcentered\n\t\t\tclassName={state.error ? \"error \" : \"\"}\n\t\t>\n\t\t\t<Modal.Body>\n\t\t\t\t<div className=\"form-title mb-3\">\n\t\t\t\t\t<h4 className=\"text-yellow\">Login</h4>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t\t<Form onSubmit={(e) => handleSubmit(e)}>\n\t\t\t\t\t\t<Form.Group controlId=\"formBasicEmail\">\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\t\t\tonChange={(e) => onChange(e)}\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\tclassName=\"form-control input-bg\"\n\t\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Group>\n\n\t\t\t\t\t\t<Form.Group controlId=\"formBasicPassword\">\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\tvalue={form.password}\n\t\t\t\t\t\t\t\tonChange={(e) => onChange(e)}\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tclassName=\"form-control input-bg\"\n\t\t\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tvariant=\"brown\"\n\t\t\t\t\t\t\tclassName=\"btn btn-block btn-round\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tLogin\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Form>\n\t\t\t\t\t<p className=\"text-danger\">{state.error}</p>\n\t\t\t\t\t{/* <pre>{JSON.stringify(form, 2, null)}</pre> */}\n\t\t\t\t\t<div className=\"text-center text-muted delimiter mt-2\">\n\t\t\t\t\t\tDon't have an account ? klick\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"#\"\n\t\t\t\t\t\t\tonClick={handleOpenRegister}\n\t\t\t\t\t\t\tclassName=\"font-weight-bold text-muted\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\there\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t.\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Modal.Body>\n\t\t</Modal>\n\t);\n}\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}