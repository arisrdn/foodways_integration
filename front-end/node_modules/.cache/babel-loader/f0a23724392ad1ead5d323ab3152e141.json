{"ast":null,"code":"var _jsxFileName = \"/Users/aris/ABC/DU/code/integrasi/front-end/src/pages/Login.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { API, setAuthToken } from \"../config/api\";\nimport { AuthContext } from \"../contexts/authContext\";\nimport { Button, Form, Modal } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login(props) {\n  _s();\n\n  // console.log(props);\n  const [state, dispatch] = useContext(AuthContext);\n  const router = useHistory();\n  const [form, setForm] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const {\n    email,\n    password\n  } = form;\n\n  const handleClose = () => {\n    dispatch({\n      type: \"MODAL_LOGIN_CLOSE\"\n    });\n  };\n\n  const handleOpenRegister = () => {\n    handleClose();\n    dispatch({\n      type: \"MODAL_REGISTER_OPEN\"\n    });\n  };\n\n  const onChange = e => {\n    const updateForm = { ...form\n    };\n    updateForm[e.target.name] = e.target.value;\n    setForm(updateForm);\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    handleClose();\n    let error;\n\n    try {\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      };\n      const body = JSON.stringify({\n        email,\n        password\n      });\n      const response = await API.post(\"/login\", body, config).catch(err => {\n        if (err.response.status === 404) {\n          throw new Error(`${err.config.url} not found`);\n        }\n\n        throw err;\n      });\n      dispatch({\n        type: \"LOGIN_SUCCESS\",\n        payload: response.data.data.user\n      });\n      setAuthToken(response.data.data.user.token);\n      router.push(\"/product\"); //   console.log(response.data);\n    } catch (err) {\n      error = err;\n      console.log(error);\n    }\n  }; // console.log(\"login\", state);\n\n\n  return /*#__PURE__*/_jsxDEV(Modal // show={state.modalLogin}{modalshow}\n  , {\n    show: props.show ? props.show : state.modalLogin // onHide={handleClose}\n    ,\n    onHide: props.onHide ? props.onHide : handleClose,\n    size: \"sm\",\n    centered: true,\n    className: state.error ? \"error avenir \" : \"avenir\",\n    children: /*#__PURE__*/_jsxDEV(Modal.Body, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-title mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-yellow\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column\",\n        children: [/*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: e => handleSubmit(e),\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"formBasicEmail\",\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              value: form.email,\n              onChange: e => onChange(e),\n              type: \"email\",\n              name: \"email\",\n              className: \"form-control input-bg\",\n              placeholder: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"formBasicPassword\",\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              value: form.password,\n              onChange: e => onChange(e),\n              type: \"password\",\n              name: \"password\",\n              className: \"form-control input-bg\",\n              placeholder: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"brown\",\n            className: \"btn btn-block btn-round\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-danger\",\n          children: state.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center text-muted delimiter mt-2\",\n          children: [\"Don't have an account ? klick\", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"#\",\n            onClick: handleOpenRegister,\n            className: \"font-weight-bold text-muted\",\n            children: \"here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 7\n          }, this), \".\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Login, \"hIvKa4Io3E4NED266ZQG33mxR0c=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/aris/ABC/DU/code/integrasi/front-end/src/pages/Login.js"],"names":["useContext","useState","Link","useHistory","API","setAuthToken","AuthContext","Button","Form","Modal","Login","props","state","dispatch","router","form","setForm","email","password","handleClose","type","handleOpenRegister","onChange","e","updateForm","target","name","value","handleSubmit","preventDefault","error","config","headers","body","JSON","stringify","response","post","catch","err","status","Error","url","payload","data","user","token","push","console","log","show","modalLogin","onHide"],"mappings":"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","sourcesContent":["import { useContext, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { API, setAuthToken } from \"../config/api\";\n\nimport { AuthContext } from \"../contexts/authContext\";\n\nimport { Button, Form, Modal } from \"react-bootstrap\";\n\nfunction Login(props) {\n\t// console.log(props);\n\tconst [state, dispatch] = useContext(AuthContext);\n\tconst router = useHistory();\n\tconst [form, setForm] = useState({\n\t\temail: \"\",\n\t\tpassword: \"\",\n\t});\n\tconst { email, password } = form;\n\n\tconst handleClose = () => {\n\t\tdispatch({\n\t\t\ttype: \"MODAL_LOGIN_CLOSE\",\n\t\t});\n\t};\n\tconst handleOpenRegister = () => {\n\t\thandleClose();\n\t\tdispatch({\n\t\t\ttype: \"MODAL_REGISTER_OPEN\",\n\t\t});\n\t};\n\n\tconst onChange = (e) => {\n\t\tconst updateForm = { ...form };\n\t\tupdateForm[e.target.name] = e.target.value;\n\t\tsetForm(updateForm);\n\t};\n\tconst handleSubmit = async (e) => {\n\t\te.preventDefault();\n\t\thandleClose();\n\t\tlet error;\n\t\ttry {\n\t\t\tconst config = {\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tconst body = JSON.stringify({\n\t\t\t\temail,\n\t\t\t\tpassword,\n\t\t\t});\n\n\t\t\tconst response = await API.post(\"/login\", body, config).catch((err) => {\n\t\t\t\tif (err.response.status === 404) {\n\t\t\t\t\tthrow new Error(`${err.config.url} not found`);\n\t\t\t\t}\n\t\t\t\tthrow err;\n\t\t\t});\n\n\t\t\tdispatch({\n\t\t\t\ttype: \"LOGIN_SUCCESS\",\n\t\t\t\tpayload: response.data.data.user,\n\t\t\t});\n\n\t\t\tsetAuthToken(response.data.data.user.token);\n\t\t\trouter.push(\"/product\");\n\n\t\t\t//   console.log(response.data);\n\t\t} catch (err) {\n\t\t\terror = err;\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\t// console.log(\"login\", state);\n\treturn (\n\t\t<Modal\n\t\t\t// show={state.modalLogin}{modalshow}\n\t\t\tshow={props.show ? props.show : state.modalLogin}\n\t\t\t// onHide={handleClose}\n\t\t\tonHide={props.onHide ? props.onHide : handleClose}\n\t\t\tsize=\"sm\"\n\t\t\tcentered\n\t\t\tclassName={state.error ? \"error avenir \" : \"avenir\"}\n\t\t>\n\t\t\t<Modal.Body>\n\t\t\t\t<div className=\"form-title mb-3\">\n\t\t\t\t\t<h4 className=\"text-yellow\">Login</h4>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t\t<Form onSubmit={(e) => handleSubmit(e)}>\n\t\t\t\t\t\t<Form.Group controlId=\"formBasicEmail\">\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\t\t\tonChange={(e) => onChange(e)}\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\tclassName=\"form-control input-bg\"\n\t\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Group>\n\n\t\t\t\t\t\t<Form.Group controlId=\"formBasicPassword\">\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\tvalue={form.password}\n\t\t\t\t\t\t\t\tonChange={(e) => onChange(e)}\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tclassName=\"form-control input-bg\"\n\t\t\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tvariant=\"brown\"\n\t\t\t\t\t\t\tclassName=\"btn btn-block btn-round\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tLogin\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Form>\n\t\t\t\t\t<p className=\"text-danger\">{state.error}</p>\n\t\t\t\t\t{/* <pre>{JSON.stringify(form, 2, null)}</pre> */}\n\t\t\t\t\t<div className=\"text-center text-muted delimiter mt-2\">\n\t\t\t\t\t\tDon't have an account ? klick\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto=\"#\"\n\t\t\t\t\t\t\tonClick={handleOpenRegister}\n\t\t\t\t\t\t\tclassName=\"font-weight-bold text-muted\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\there\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t.\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Modal.Body>\n\t\t</Modal>\n\t);\n}\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}